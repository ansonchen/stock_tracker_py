# 📈 A股交易记录助手 (A-Share Trade Tracker)

这是一个基于 Python Streamlit 开发的轻量级 A股交易记录与分析工具。它可以帮助你记录每一笔交易的详细信息（包括买卖时间、价格、数量、战法等），并自动计算盈亏，生成可视化的统计图表。

## ✨ 主要功能

*   **交易记录**：详细记录买入和卖出的日期、时间、价格、数量。
*   **自动计算**：自动计算单笔盈亏、盈亏比例、总盈亏及胜率。
*   **股票识别**：输入股票代码自动获取股票名称（支持沪深京市场）。
*   **可视化统计**：
    *   每日盈亏柱状图
    *   资金曲线（累计盈亏趋势图）
*   **数据管理**：支持对已有记录进行编辑、平仓或删除。
*   **Excel 存储**：所有数据保存在本地 Excel 文件中，方便二次备份或分析。

## 🚀 快速开始

### 1. 环境要求
确保你已经安装了 Python (建议 3.8+)。

### 2. 安装依赖
在项目目录下运行以下命令安装所需库：
```bash
pip install -r requirements.txt
```
*如果目录下没有 `requirements.txt`，请手动安装：*
```bash
pip install streamlit pandas plotly openpyxl requests
```

### 3. 启动应用
运行以下命令启动网页应用：
```bash
streamlit run app.py
```
启动后，浏览器会自动打开 `http://localhost:8501`。

---

## 📖 使用指南

### 1. 首页 (仪表盘)
首页展示了你的交易概览：
*   **统计卡片**：显示总盈亏、总交易笔数（已平仓）和胜率。
*   **图表区域**：
    *   **每日盈亏**：按卖出日期汇总的盈亏柱状图（红色代表盈利，绿色代表亏损）。
    *   **资金曲线**：展示账户累计盈亏的变化趋势。
*   **交易明细表**：列出所有交易记录。点击表格中的任意一行，可以进入**编辑模式**。

### 2. 新增交易
点击首页顶部的 **“➕ 新增交易”** 按钮。

*   **股票代码**：输入6位代码（如 `600519`），系统会自动加载股票名称。
*   **买入信息**：
    *   选择买入日期和**具体时间**（精确到秒）。
    *   输入买入价格和数量。
*   **交易细节**：
    *   **位置**：选择买入时的技术形态位置（如 A区、B区、股价平台等）。
    *   **战法**：多选，记录使用的战法（如 星线、单日洗盘等）。
    *   **操作**：追涨或低吸。
*   **卖出信息 (可选)**：如果是已平仓的交易，可以在此处直接录入卖出时间和价格；如果是持仓中，留空即可。
*   **保存**：点击“保存记录”完成添加。

### 3. 编辑与平仓
在首页的交易明细表中，点击你想要修改的记录，进入编辑页面。

*   **修改信息**：你可以修正任何录入错误的信息。
*   **录入卖出**：当一笔持仓交易卖出后，在此页面补充“卖出日期”、“卖出时间”、“卖出价格”和“卖出数量”。
*   **保存修改**：系统会自动重新计算该笔交易的盈亏。

### 4. 删除记录
在编辑页面底部，点击 **“🗑️ 删除记录”** 按钮。
*   系统会弹出二次确认框，点击“确认删除”后，该条记录将被永久移除。

---

## 📂 数据存储
*   所有交易数据存储在当前目录下的 `trades.xlsx` 文件中。
*   **备份建议**：定期复制该 Excel 文件到其他位置进行备份。
*   **注意**：请勿在程序运行时直接用 Excel 打开并编辑该文件，可能会导致保存失败（文件被占用）。

## 🛠️ 常见问题
*   **Q: 输入代码后没有显示股票名称？**
    *   A: 请检查网络连接，系统需要访问新浪财经接口获取数据。如果代码正确但无响应，可能是接口暂时不可用。
*   **Q: 盈亏显示为 NaN 或不正确？**
    *   A: 只有当“卖出价格”和“卖出数量”都已填写时，系统才会计算盈亏。请检查是否完整录入了卖出信息。
